{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport AppLayout from \"../components/AppLayout\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { LOAD_MY_INFO_REQUEST } from \"../reducers/user\";\nimport { LOAD_MAIN_POSTS_REQUEST, LOAD_POSTNUM_REQUEST } from \"../reducers/post\";\nimport wrapper from \"../store/configureStore\";\nimport { END } from \"redux-saga\";\nimport axios from \"axios\";\nimport { createGlobalStyle } from \"styled-components\";\nimport { Pagination } from \"antd\";\nimport ListComponent from \"../components/ListComponent\";\nexport const Global = createGlobalStyle([\".ant-pagination-options{display:none;}\"]);\n\nconst Home = () => {\n  const dispatch = useDispatch();\n  const {\n    0: current,\n    1: setCurrent\n  } = useState(1);\n  const {\n    Posts,\n    currentPageNum,\n    PostNum\n  } = useSelector(state => state.post);\n  useEffect(() => {\n    setCurrent(currentPageNum);\n  }, [currentPageNum]);\n  const onChange = useCallback(page => {\n    return dispatch({\n      type: LOAD_MAIN_POSTS_REQUEST,\n      data: {\n        page\n      }\n    });\n  }, []);\n  return __jsx(AppLayout, null, __jsx(ListComponent, {\n    Posts: Posts\n  }), __jsx(\"div\", {\n    style: {\n      marginBottom: \"15px\"\n    }\n  }), __jsx(Global, null), __jsx(Pagination, {\n    style: {\n      textAlign: \"center\",\n      marginTop: \"20px\",\n      marginBottom: \"15px\"\n    },\n    current: current,\n    onChange: onChange,\n    total: PostNum - PostNum / 11\n  }));\n};\n\nexport const getServerSideProps = wrapper.getServerSideProps(async context => {\n  const cookie = context.req ? context.req.headers.cookie : \"\";\n  axios.defaults.headers.Cookie = \"\";\n\n  if (context.req && cookie) {\n    axios.defaults.headers.Cookie = cookie;\n  }\n\n  context.store.dispatch({\n    type: LOAD_MAIN_POSTS_REQUEST,\n    data: {\n      page: 1\n    }\n  });\n  context.store.dispatch({\n    type: LOAD_MY_INFO_REQUEST\n  });\n  context.store.dispatch({\n    type: LOAD_POSTNUM_REQUEST,\n    data: \"main\"\n  });\n  context.store.dispatch(END);\n  await context.store.sagaTask.toPromise();\n});\nexport default Home;","map":{"version":3,"sources":["/Users/byeongjun/My blog/front/pages/index.js"],"names":["React","useState","useCallback","useEffect","AppLayout","useSelector","useDispatch","LOAD_MY_INFO_REQUEST","LOAD_MAIN_POSTS_REQUEST","LOAD_POSTNUM_REQUEST","wrapper","END","axios","createGlobalStyle","Pagination","ListComponent","Global","Home","dispatch","current","setCurrent","Posts","currentPageNum","PostNum","state","post","onChange","page","type","data","marginBottom","textAlign","marginTop","getServerSideProps","context","cookie","req","headers","defaults","Cookie","store","sagaTask","toPromise"],"mappings":"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","sourcesContent":["import React, { useState, useCallback, useEffect } from \"react\";\nimport AppLayout from \"../components/AppLayout\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { LOAD_MY_INFO_REQUEST } from \"../reducers/user\";\nimport {\n  LOAD_MAIN_POSTS_REQUEST,\n  LOAD_POSTNUM_REQUEST,\n} from \"../reducers/post\";\nimport wrapper from \"../store/configureStore\";\nimport { END } from \"redux-saga\";\nimport axios from \"axios\";\nimport { createGlobalStyle } from \"styled-components\";\nimport { Pagination } from \"antd\";\nimport ListComponent from \"../components/ListComponent\";\n\nexport const Global = createGlobalStyle`\n    .ant-pagination-options{\n        display : none;\n    }\n`;\n\nconst Home = () => {\n  const dispatch = useDispatch();\n  const [current, setCurrent] = useState(1);\n  const { Posts, currentPageNum, PostNum } = useSelector((state) => state.post);\n\n  useEffect(() => {\n    setCurrent(currentPageNum);\n  }, [currentPageNum]);\n\n  const onChange = useCallback((page) => {\n    return dispatch({\n      type: LOAD_MAIN_POSTS_REQUEST,\n      data: {\n        page,\n      },\n    });\n  }, []);\n\n  return (\n    <AppLayout>\n      <ListComponent Posts={Posts} />\n      <div style={{ marginBottom: \"15px\" }}></div>\n      <Global />\n      <Pagination\n        style={{ textAlign: \"center\", marginTop: \"20px\", marginBottom: \"15px\" }}\n        current={current}\n        onChange={onChange}\n        total={PostNum - PostNum / 11}\n      />\n    </AppLayout>\n  );\n};\n\nexport const getServerSideProps = wrapper.getServerSideProps(\n  async (context) => {\n    const cookie = context.req ? context.req.headers.cookie : \"\";\n    axios.defaults.headers.Cookie = \"\";\n    if (context.req && cookie) {\n      axios.defaults.headers.Cookie = cookie;\n    }\n    context.store.dispatch({\n      type: LOAD_MAIN_POSTS_REQUEST,\n      data: {\n        page: 1,\n      },\n    });\n    context.store.dispatch({\n      type: LOAD_MY_INFO_REQUEST,\n    });\n    context.store.dispatch({\n      type: LOAD_POSTNUM_REQUEST,\n      data: \"main\",\n    });\n    context.store.dispatch(END);\n    await context.store.sagaTask.toPromise();\n  }\n);\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}