{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useCallback, useEffect } from 'react';\nimport AppLayout from \"../components/AppLayout\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { LOAD_MAIN_POSTS_REQUEST } from '../reducers/post';\nimport { createGlobalStyle } from \"styled-components\";\nimport { Pagination } from 'antd';\nimport ListComponent from '../components/ListComponent';\nexport var __N_SSP = true;\nexport var Global = createGlobalStyle([\".ant-pagination-options{display:none;}\"]);\n\nvar Home = function Home() {\n  var dispatch = useDispatch();\n\n  var _useState = useState(1),\n      current = _useState[0],\n      setCurrent = _useState[1];\n\n  var _useSelector = useSelector(function (state) {\n    return state.post;\n  }),\n      Posts = _useSelector.Posts,\n      currentPageNum = _useSelector.currentPageNum;\n\n  useEffect(function () {\n    setCurrent(currentPageNum);\n  }, [currentPageNum]);\n  var onChange = useCallback(function (page) {\n    return dispatch({\n      type: LOAD_MAIN_POSTS_REQUEST,\n      data: {\n        page: page\n      }\n    });\n  }, []);\n  return __jsx(AppLayout, null, __jsx(ListComponent, {\n    Posts: Posts\n  }), __jsx(\"div\", {\n    style: {\n      marginBottom: \"15px\"\n    }\n  }), __jsx(Global, null), __jsx(Pagination, {\n    style: {\n      textAlign: \"center\",\n      marginTop: \"20px\",\n      marginBottom: \"15px\"\n    },\n    current: current,\n    onChange: onChange,\n    total: 80\n  }));\n};\n\nexport default Home;","map":{"version":3,"sources":["/Users/byeongjun/My blog/front/pages/index.js"],"names":["React","useState","useCallback","useEffect","AppLayout","useSelector","useDispatch","LOAD_MAIN_POSTS_REQUEST","createGlobalStyle","Pagination","ListComponent","Global","Home","dispatch","current","setCurrent","state","post","Posts","currentPageNum","onChange","page","type","data","marginBottom","textAlign","marginTop"],"mappings":";AAAA,OAAOA,KAAP,IAAcC,QAAd,EAAuBC,WAAvB,EAAoCC,SAApC,QAAoD,OAApD;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAwC,aAAxC;AAEA,SAASC,uBAAT,QAAwC,kBAAxC;AAIA,SAASC,iBAAT,QAAkC,mBAAlC;AACA,SAASC,UAAT,QAA2B,MAA3B;AACA,OAAOC,aAAP,MAA0B,6BAA1B;;AAEA,OAAO,IAAMC,MAAM,GAAGH,iBAAH,4CAAZ;;AAMP,IAAMI,IAAI,GAAG,SAAPA,IAAO,GAAM;AACjB,MAAMC,QAAQ,GAAGP,WAAW,EAA5B;;AACA,kBAA6BL,QAAQ,CAAC,CAAD,CAArC;AAAA,MAAOa,OAAP;AAAA,MAAeC,UAAf;;AACA,qBAAgCV,WAAW,CAAC,UAACW,KAAD;AAAA,WAAUA,KAAK,CAACC,IAAhB;AAAA,GAAD,CAA3C;AAAA,MAAOC,KAAP,gBAAOA,KAAP;AAAA,MAAcC,cAAd,gBAAcA,cAAd;;AAEAhB,EAAAA,SAAS,CAAC,YAAI;AACZY,IAAAA,UAAU,CAACI,cAAD,CAAV;AACD,GAFQ,EAEP,CAACA,cAAD,CAFO,CAAT;AAIA,MAAMC,QAAQ,GAAGlB,WAAW,CAAC,UAACmB,IAAD,EAAU;AACrC,WAAOR,QAAQ,CAAC;AACdS,MAAAA,IAAI,EAAEf,uBADQ;AAEdgB,MAAAA,IAAI,EAAG;AACLF,QAAAA,IAAI,EAAJA;AADK;AAFO,KAAD,CAAf;AAMD,GAP2B,EAO1B,EAP0B,CAA5B;AASA,SACE,MAAC,SAAD,QACE,MAAC,aAAD;AAAe,IAAA,KAAK,EAAIH;AAAxB,IADF,EAEE;AAAK,IAAA,KAAK,EAAI;AAACM,MAAAA,YAAY,EAAG;AAAhB;AAAd,IAFF,EAGE,MAAC,MAAD,OAHF,EAIE,MAAC,UAAD;AAAY,IAAA,KAAK,EAAI;AAACC,MAAAA,SAAS,EAAG,QAAb;AAAuBC,MAAAA,SAAS,EAAG,MAAnC;AAA2CF,MAAAA,YAAY,EAAG;AAA1D,KAArB;AAAwF,IAAA,OAAO,EAAEV,OAAjG;AAA0G,IAAA,QAAQ,EAAEM,QAApH;AAA8H,IAAA,KAAK,EAAE;AAArI,IAJF,CADF;AAQD,CA1BD;;AA+CA,eAAeR,IAAf","sourcesContent":["import React,{useState,useCallback, useEffect} from 'react';\nimport AppLayout from \"../components/AppLayout\";\nimport { useSelector, useDispatch} from 'react-redux';\nimport { LOAD_MY_INFO_REQUEST } from '../reducers/user'\nimport { LOAD_MAIN_POSTS_REQUEST } from '../reducers/post';\nimport wrapper from \"../store/configureStore\";\nimport { END } from 'redux-saga';\nimport axios from 'axios'\nimport { createGlobalStyle } from \"styled-components\";\nimport { Pagination } from 'antd';\nimport ListComponent from '../components/ListComponent';\n\nexport const Global = createGlobalStyle`\n    .ant-pagination-options{\n        display : none;\n    }\n`;\n\nconst Home = () => {\n  const dispatch = useDispatch();\n  const [current,setCurrent] = useState(1);\n  const {Posts, currentPageNum} = useSelector((state)=>(state.post));\n\n  useEffect(()=>{\n    setCurrent(currentPageNum);\n  },[currentPageNum])\n\n  const onChange = useCallback((page) => {\n    return dispatch({\n      type: LOAD_MAIN_POSTS_REQUEST,\n      data : {\n        page\n      }\n    })\n  },[]);\n\n  return (\n    <AppLayout>\n      <ListComponent Posts = {Posts}/>\n      <div style = {{marginBottom : \"15px\"}}></div>\n      <Global />\n      <Pagination style = {{textAlign : \"center\", marginTop : \"20px\", marginBottom : \"15px\"}} current={current} onChange={onChange} total={80} />\n    </AppLayout>\n  );\n}\n\nexport const getServerSideProps = wrapper.getServerSideProps(async (context) => {\n  const cookie = context.req ? context.req.headers.cookie : '';\n  axios.defaults.headers.Cookie = '';\n  if (context.req && cookie) {\n    axios.defaults.headers.Cookie = cookie;\n  }\n  context.store.dispatch({\n    type: LOAD_MAIN_POSTS_REQUEST,\n    data : {\n      page : 1\n    }\n  });\n  context.store.dispatch({\n    type: LOAD_MY_INFO_REQUEST,\n  })\n  context.store.dispatch(END);\n  await context.store.sagaTask.toPromise();\n});\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}