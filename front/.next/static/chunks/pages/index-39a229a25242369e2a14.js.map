{"version":3,"sources":["webpack://_N_E/./pages/index.js","webpack://_N_E/./reducers/post.js","webpack://_N_E/./node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js"],"names":["Global","createGlobalStyle","Home","dispatch","useDispatch","useState","current","setCurrent","useSelector","state","post","Posts","currentPageNum","PostNum","useEffect","onChange","useCallback","page","type","LOAD_MAIN_POSTS_REQUEST","data","style","marginBottom","textAlign","marginTop","total","initialState","currentPost","loadMainPostsLoading","loadMainPostsDone","loadMainPostsError","loadCategorypostsLoading","loadCategorypostsDone","loadCategorypostsError","loadCurpostLoading","loadCurpostDone","loadCurpostError","searchPostsLoading","searchPostsDone","searchPostsError","addPostLoading","addPostDone","addPostError","addCommentLoading","addCommentDone","addCommentError","removePostLoading","removePostDone","removePostError","updatePostLoading","updatePostDone","updatePostError","SET_CURRENT_PAGENUM","LOAD_POSTNUM_REQUEST","LOAD_POSTNUM_SUCCESS","LOAD_POSTNUM_FAILURE","LOAD_CURPOST_REQUEST","LOAD_CURPOST_SUCCESS","LOAD_CURPOST_FAILURE","LOAD_CATEGORYPOSTS_REQUEST","LOAD_CATEGORYPOSTS_SUCCESS","LOAD_CATEGORYPOSTS_FAILURE","LOAD_MAIN_POSTS_SUCCESS","LOAD_MAIN_POSTS_FAILURE","SEARCH_POSTS_REQUEST","SEARCH_POSTS_SUCCESS","SEARCH_POSTS_FAILURE","ADD_POST_REQUEST","ADD_POST_SUCCESS","ADD_POST_FAILURE","ADD_COMMENT_REQUEST","ADD_COMMENT_SUCCESS","ADD_COMMENT_FAILURE","REMOVE_POST_REQUEST","REMOVE_POST_SUCCESS","REMOVE_POST_FAILURE","UPDATE_POST_REQUEST","UPDATE_POST_SUCCESS","UPDATE_POST_FAILURE","reducer","action","produce","draft","unshift","error","Comments","concat","filter","v","id","message","loadMainPostLoading","loadMainPostDone","loadMainPostError","searchPostDone","searchPostError","loadPCurpostLoading","length","window","__NEXT_P","push"],"mappings":"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","file":"static/chunks/pages/index-39a229a25242369e2a14.js","sourcesContent":["import React, { useState, useCallback, useEffect } from \"react\";\nimport AppLayout from \"../components/AppLayout\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { LOAD_MY_INFO_REQUEST } from \"../reducers/user\";\nimport {\n  LOAD_MAIN_POSTS_REQUEST,\n  LOAD_POSTNUM_REQUEST,\n} from \"../reducers/post\";\nimport wrapper from \"../store/configureStore\";\nimport { END } from \"redux-saga\";\nimport axios from \"axios\";\nimport { createGlobalStyle } from \"styled-components\";\nimport { Pagination } from \"antd\";\nimport ListComponent from \"../components/ListComponent\";\n\nexport const Global = createGlobalStyle`\n    .ant-pagination-options{\n        display : none;\n    }\n`;\n\nconst Home = () => {\n  const dispatch = useDispatch();\n  const [current, setCurrent] = useState(1);\n  const { Posts, currentPageNum, PostNum } = useSelector((state) => state.post);\n\n  useEffect(() => {\n    setCurrent(currentPageNum);\n  }, [currentPageNum]);\n\n  const onChange = useCallback((page) => {\n    return dispatch({\n      type: LOAD_MAIN_POSTS_REQUEST,\n      data: {\n        page,\n      },\n    });\n  }, []);\n\n  return (\n    <AppLayout>\n      <ListComponent Posts={Posts} />\n      <div style={{ marginBottom: \"15px\" }}></div>\n      <Global />\n      <Pagination\n        style={{ textAlign: \"center\", marginTop: \"20px\", marginBottom: \"15px\" }}\n        current={current}\n        onChange={onChange}\n        total={PostNum - PostNum / 11}\n      />\n    </AppLayout>\n  );\n};\n\nexport const getServerSideProps = wrapper.getServerSideProps(\n  async (context) => {\n    const cookie = context.req ? context.req.headers.cookie : \"\";\n    axios.defaults.headers.Cookie = \"\";\n    if (context.req && cookie) {\n      axios.defaults.headers.Cookie = cookie;\n    }\n    context.store.dispatch({\n      type: LOAD_MAIN_POSTS_REQUEST,\n      data: {\n        page: 1,\n      },\n    });\n    context.store.dispatch({\n      type: LOAD_MY_INFO_REQUEST,\n    });\n    context.store.dispatch({\n      type: LOAD_POSTNUM_REQUEST,\n      data: \"main\",\n    });\n    context.store.dispatch(END);\n    await context.store.sagaTask.toPromise();\n  }\n);\n\nexport default Home;\n","import produce from \"../util/produce\";\nexport const initialState = {\n  Posts: [],\n  currentPageNum : null,\n  currentPost: null,\n  PostNum : null,\n  loadMainPostsLoading: false,\n  loadMainPostsDone: false,\n  loadMainPostsError: null,\n  loadCategorypostsLoading: false,\n  loadCategorypostsDone: false,\n  loadCategorypostsError: null,\n  loadCurpostLoading: false,\n  loadCurpostDone: false,\n  loadCurpostError: null,\n  searchPostsLoading: false,\n  searchPostsDone: false,\n  searchPostsError: null,\n  addPostLoading: false,\n  addPostDone: false,\n  addPostError: null,\n  addCommentLoading: false,\n  addCommentDone: false,\n  addCommentError: null,\n  removePostLoading: false,\n  removePostDone: false,\n  removePostError: null,\n  updatePostLoading: false,\n  updatePostDone: false,\n  updatePostError: null,\n};\n\nexport const SET_CURRENT_PAGENUM = \"SET_CURRENT_PAGENUM\";\n\nexport const LOAD_POSTNUM_REQUEST = \"LOAD_POSTNUM_REQUEST\";\nexport const LOAD_POSTNUM_SUCCESS = \"LOAD_POSTNUM_SUCCESS\";\nexport const LOAD_POSTNUM_FAILURE = \"LOAD_POSTNUM_FAILURE\";\n\nexport const LOAD_CURPOST_REQUEST = \"LOAD_CURPOST_REQUEST\";\nexport const LOAD_CURPOST_SUCCESS = \"LOAD_CURPOST_SUCCESS\";\nexport const LOAD_CURPOST_FAILURE = \"LOAD_CURPOST_FAILURE\";\n\nexport const LOAD_CATEGORYPOSTS_REQUEST = \"LOAD_CATEGORYPOSTS_REQUEST\";\nexport const LOAD_CATEGORYPOSTS_SUCCESS = \"LOAD_CATEGORYPOSTS_SUCCESS\";\nexport const LOAD_CATEGORYPOSTS_FAILURE = \"LOAD_CATEGORYPOSTS_FAILURE\";\n\nexport const LOAD_MAIN_POSTS_REQUEST = \"LOAD_MAIN_POSTS_REQUEST\";\nexport const LOAD_MAIN_POSTS_SUCCESS = \"LOAD_MAIN_POSTS_SUCCESS\";\nexport const LOAD_MAIN_POSTS_FAILURE = \"LOAD_MAIN_POSTS_FAILURE\";\n\nexport const SEARCH_POSTS_REQUEST = \"SEARCH_POSTS_REQUEST\";\nexport const SEARCH_POSTS_SUCCESS = \"SEARCH_POSTS_SUCCESS\";\nexport const SEARCH_POSTS_FAILURE = \"SEARCH_POSTS_FAILURE\";\n\nexport const ADD_POST_REQUEST = \"ADD_POST_REQUEST\";\nexport const ADD_POST_SUCCESS = \"ADD_POST_SUCCESS\";\nexport const ADD_POST_FAILURE = \"ADD_POST_FAILURE\";\n\nexport const ADD_COMMENT_REQUEST = \"ADD_COMMENT_REQUEST\";\nexport const ADD_COMMENT_SUCCESS = \"ADD_COMMENT_SUCCESS\";\nexport const ADD_COMMENT_FAILURE = \"ADD_COMMENT_FAILURE\";\n\nexport const REMOVE_POST_REQUEST = \"REMOVE_POST_REQUEST\";\nexport const REMOVE_POST_SUCCESS = \"REMOVE_POST_SUCCESS\";\nexport const REMOVE_POST_FAILURE = \"REMOVE_POST_FAILURE\";\n\nexport const UPDATE_POST_REQUEST = \"UPDATE_POST_REQUEST\";\nexport const UPDATE_POST_SUCCESS = \"UPDATE_POST_SUCCESS\";\nexport const UPDATE_POST_FAILURE = \"UPDATE_POST_FAILURE\";\n\nconst reducer = (state = initialState, action) =>\n  produce(state, (draft) => {\n    switch (action.type) {\n      case ADD_POST_REQUEST:\n        draft.addPostLoading = true;\n        draft.addPostDone = false;\n        draft.addPostError = false;\n        break;\n      case ADD_POST_SUCCESS:\n        draft.addPostLoading = false;\n        draft.addPostDone = true;\n        draft.Posts.unshift(action.data);\n        break;\n      case ADD_POST_FAILURE:\n        draft.addPostLoading = false;\n        draft.addPostError = action.error;\n        break;\n\n      case ADD_COMMENT_REQUEST:\n        draft.addCommentLoading = true;\n        draft.addCommentDone = false;\n        draft.addCommentError = null;\n        break;\n      case ADD_COMMENT_SUCCESS: {\n        draft.currentPost.Comments = draft.currentPost.Comments.concat(\n          action.data\n        );\n        draft.addCommentLoading = false;\n        draft.addCommentDone = true;\n        break;\n      }\n      case ADD_COMMENT_FAILURE:\n        draft.addCommentLoading = false;\n        draft.addCommentError = action.error;\n        break;\n\n      case REMOVE_POST_REQUEST:\n        draft.removePostLoading = true;\n        draft.removePostDone = false;\n        draft.removePostError = false;\n        break;\n      case REMOVE_POST_SUCCESS:\n        draft.removePostLoading = false;\n        draft.removePostDone = true;\n        draft.Posts = draft.Posts.filter((v) => v.id !== action.data);\n        break;\n      case REMOVE_POST_FAILURE:\n        draft.removePostLoading = false;\n        draft.removePostError = action.error;\n        break;\n\n      case UPDATE_POST_REQUEST:\n        draft.updatePostLoading = true;\n        draft.updatePostDone = false;\n        draft.updatePostError = false;\n        break;\n      case UPDATE_POST_SUCCESS:\n        draft.updatePostLoading = false;\n        draft.updatePostDone = action.data.message;\n        break;\n      case UPDATE_POST_FAILURE:\n        draft.updatePostLoading = false;\n        draft.updatePostError = action.error;\n        break;\n\n      case LOAD_MAIN_POSTS_REQUEST:\n        draft.loadMainPostLoading = true;\n        draft.loadMainPostDone = false;\n        draft.loadMainPostError = false;\n        break;\n      case LOAD_MAIN_POSTS_SUCCESS:\n        draft.loadMainPostLoading = false;\n        draft.loadMainPostDone = true;\n        draft.Posts = action.data;\n        break;\n      case LOAD_MAIN_POSTS_FAILURE:\n        draft.loadMainPostLoading = false;\n        draft.loadMainPostError = action.error;\n        break;\n\n      case SEARCH_POSTS_REQUEST:\n        draft.searchPostsLoading = true;\n        draft.searchPostDone = false;\n        draft.searchPostError = false;\n        break;\n      case SEARCH_POSTS_SUCCESS:\n        draft.searchPostsLoading = false;\n        draft.searchPostsDone = true;\n        draft.Posts = action.data.concat(draft.Posts);\n        break;\n      case SEARCH_POSTS_FAILURE:\n        draft.searchPostsLoading = false;\n        draft.searchPostsError = action.error;\n        break;\n\n      case LOAD_CURPOST_REQUEST:\n        draft.loadCurpostLoading = true;\n        draft.loadCurpostDone = false;\n        draft.loadCurpostError = false;\n        break;\n      case LOAD_CURPOST_SUCCESS:\n        draft.loadCurpostLoading = false;\n        draft.loadCurpostDone = true;\n        draft.currentPost = action.data;\n        break;\n      case LOAD_CURPOST_FAILURE:\n        draft.loadPCurpostLoading = false;\n        draft.loadCurpostError = action.error;\n        break;\n\n      case LOAD_CATEGORYPOSTS_REQUEST:\n        draft.loadCategorypostsLoading = true;\n        draft.loadCategorypostsDone = false;\n        draft.loadCategorypostsError = false;\n        break;\n      case LOAD_CATEGORYPOSTS_SUCCESS:\n        draft.loadCategorypostsLoading = false;\n        draft.loadCategorypostsDone = true;\n        draft.Posts = action.data;\n        break;\n      case LOAD_CATEGORYPOSTS_FAILURE:\n        draft.loadCategorypostsLoading = false;\n        draft.loadCategorypostsError = action.error;\n        break;\n\n      case SET_CURRENT_PAGENUM:\n        draft.currentPageNum = action.data.page;\n        break;\n\n      case LOAD_POSTNUM_SUCCESS:\n          draft.PostNum = action.data.length;\n          break;\n      default:\n        break;\n    }\n  });\n\nexport default reducer;\n","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/\",\n      function () {\n        return require(\"private-next-pages/index.js\");\n      }\n    ]);\n  "],"sourceRoot":""}