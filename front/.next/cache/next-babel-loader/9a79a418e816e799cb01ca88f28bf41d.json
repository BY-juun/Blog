{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport AppLayout from \"../components/AppLayout\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { LOAD_MAIN_POSTS_REQUEST } from \"../reducers/post\";\nimport { createGlobalStyle } from \"styled-components\";\nimport { Pagination } from \"antd\";\nimport ListComponent from \"../components/ListComponent\";\nexport var __N_SSP = true;\nexport var Global = createGlobalStyle([\".ant-pagination-options{display:none;}\"]);\n\nvar Home = function Home() {\n  var dispatch = useDispatch();\n\n  var _useState = useState(1),\n      current = _useState[0],\n      setCurrent = _useState[1];\n\n  var _useSelector = useSelector(function (state) {\n    return state.post;\n  }),\n      Posts = _useSelector.Posts,\n      currentPageNum = _useSelector.currentPageNum,\n      PostNum = _useSelector.PostNum;\n\n  useEffect(function () {\n    setCurrent(currentPageNum);\n  }, [currentPageNum]);\n  var onChange = useCallback(function (page) {\n    return dispatch({\n      type: LOAD_MAIN_POSTS_REQUEST,\n      data: {\n        page: page\n      }\n    });\n  }, []);\n  return __jsx(AppLayout, null, __jsx(ListComponent, {\n    Posts: Posts\n  }), __jsx(\"div\", {\n    style: {\n      marginBottom: \"15px\"\n    }\n  }), __jsx(Global, null), __jsx(Pagination, {\n    style: {\n      textAlign: \"center\",\n      marginTop: \"20px\",\n      marginBottom: \"15px\"\n    },\n    current: current,\n    onChange: onChange,\n    total: PostNum - PostNum / 11\n  }));\n};\n\nexport default Home;","map":{"version":3,"sources":["/Users/byeongjun/My blog/front/pages/index.js"],"names":["React","useState","useCallback","useEffect","AppLayout","useSelector","useDispatch","LOAD_MAIN_POSTS_REQUEST","createGlobalStyle","Pagination","ListComponent","Global","Home","dispatch","current","setCurrent","state","post","Posts","currentPageNum","PostNum","onChange","page","type","data","marginBottom","textAlign","marginTop"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,WAA1B,EAAuCC,SAAvC,QAAwD,OAAxD;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AAEA,SACEC,uBADF,QAGO,kBAHP;AAOA,SAASC,iBAAT,QAAkC,mBAAlC;AACA,SAASC,UAAT,QAA2B,MAA3B;AACA,OAAOC,aAAP,MAA0B,6BAA1B;;AAEA,OAAO,IAAMC,MAAM,GAAGH,iBAAH,4CAAZ;;AAMP,IAAMI,IAAI,GAAG,SAAPA,IAAO,GAAM;AACjB,MAAMC,QAAQ,GAAGP,WAAW,EAA5B;;AACA,kBAA8BL,QAAQ,CAAC,CAAD,CAAtC;AAAA,MAAOa,OAAP;AAAA,MAAgBC,UAAhB;;AACA,qBAA2CV,WAAW,CAAC,UAACW,KAAD;AAAA,WAAWA,KAAK,CAACC,IAAjB;AAAA,GAAD,CAAtD;AAAA,MAAQC,KAAR,gBAAQA,KAAR;AAAA,MAAeC,cAAf,gBAAeA,cAAf;AAAA,MAA+BC,OAA/B,gBAA+BA,OAA/B;;AAEAjB,EAAAA,SAAS,CAAC,YAAM;AACdY,IAAAA,UAAU,CAACI,cAAD,CAAV;AACD,GAFQ,EAEN,CAACA,cAAD,CAFM,CAAT;AAIA,MAAME,QAAQ,GAAGnB,WAAW,CAAC,UAACoB,IAAD,EAAU;AACrC,WAAOT,QAAQ,CAAC;AACdU,MAAAA,IAAI,EAAEhB,uBADQ;AAEdiB,MAAAA,IAAI,EAAE;AACJF,QAAAA,IAAI,EAAJA;AADI;AAFQ,KAAD,CAAf;AAMD,GAP2B,EAOzB,EAPyB,CAA5B;AASA,SACE,MAAC,SAAD,QACE,MAAC,aAAD;AAAe,IAAA,KAAK,EAAEJ;AAAtB,IADF,EAEE;AAAK,IAAA,KAAK,EAAE;AAAEO,MAAAA,YAAY,EAAE;AAAhB;AAAZ,IAFF,EAGE,MAAC,MAAD,OAHF,EAIE,MAAC,UAAD;AACE,IAAA,KAAK,EAAE;AAAEC,MAAAA,SAAS,EAAE,QAAb;AAAuBC,MAAAA,SAAS,EAAE,MAAlC;AAA0CF,MAAAA,YAAY,EAAE;AAAxD,KADT;AAEE,IAAA,OAAO,EAAEX,OAFX;AAGE,IAAA,QAAQ,EAAEO,QAHZ;AAIE,IAAA,KAAK,EAAED,OAAO,GAAGA,OAAO,GAAG;AAJ7B,IAJF,CADF;AAaD,CA/BD;;AA0DA,eAAeR,IAAf","sourcesContent":["import React, { useState, useCallback, useEffect } from \"react\";\nimport AppLayout from \"../components/AppLayout\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { LOAD_MY_INFO_REQUEST } from \"../reducers/user\";\nimport {\n  LOAD_MAIN_POSTS_REQUEST,\n  LOAD_POSTNUM_REQUEST,\n} from \"../reducers/post\";\nimport wrapper from \"../store/configureStore\";\nimport { END } from \"redux-saga\";\nimport axios from \"axios\";\nimport { createGlobalStyle } from \"styled-components\";\nimport { Pagination } from \"antd\";\nimport ListComponent from \"../components/ListComponent\";\n\nexport const Global = createGlobalStyle`\n    .ant-pagination-options{\n        display : none;\n    }\n`;\n\nconst Home = () => {\n  const dispatch = useDispatch();\n  const [current, setCurrent] = useState(1);\n  const { Posts, currentPageNum, PostNum } = useSelector((state) => state.post);\n\n  useEffect(() => {\n    setCurrent(currentPageNum);\n  }, [currentPageNum]);\n\n  const onChange = useCallback((page) => {\n    return dispatch({\n      type: LOAD_MAIN_POSTS_REQUEST,\n      data: {\n        page,\n      },\n    });\n  }, []);\n\n  return (\n    <AppLayout>\n      <ListComponent Posts={Posts} />\n      <div style={{ marginBottom: \"15px\" }}></div>\n      <Global />\n      <Pagination\n        style={{ textAlign: \"center\", marginTop: \"20px\", marginBottom: \"15px\" }}\n        current={current}\n        onChange={onChange}\n        total={PostNum - PostNum / 11}\n      />\n    </AppLayout>\n  );\n};\n\nexport const getServerSideProps = wrapper.getServerSideProps(\n  async (context) => {\n    const cookie = context.req ? context.req.headers.cookie : \"\";\n    axios.defaults.headers.Cookie = \"\";\n    if (context.req && cookie) {\n      axios.defaults.headers.Cookie = cookie;\n    }\n    context.store.dispatch({\n      type: LOAD_MAIN_POSTS_REQUEST,\n      data: {\n        page: 1,\n      },\n    });\n    context.store.dispatch({\n      type: LOAD_MY_INFO_REQUEST,\n    });\n    context.store.dispatch({\n      type: LOAD_POSTNUM_REQUEST,\n      data: \"main\",\n    });\n    context.store.dispatch(END);\n    await context.store.sagaTask.toPromise();\n  }\n);\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}