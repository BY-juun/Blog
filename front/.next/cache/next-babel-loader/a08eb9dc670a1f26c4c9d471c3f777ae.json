{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useCallback } from 'react';\nimport AppLayout from \"../components/AppLayout\";\nimport { useSelector } from 'react-redux';\nimport { LOAD_MY_INFO_REQUEST } from '../reducers/user';\nimport { LOAD_POSTS_REQUEST } from '../reducers/post';\nimport wrapper from \"../store/configureStore\";\nimport { END } from 'redux-saga';\nimport axios from 'axios';\nimport { createGlobalStyle } from \"styled-components\";\nimport { Pagination } from 'antd';\nimport ListComponent from '../components/ListComponent';\nexport const Global = createGlobalStyle([\".ant-pagination-options{display:none;}\"]);\n\nconst Home = () => {\n  const {\n    0: current,\n    1: setCurrent\n  } = useState(1);\n  let startIndex = 0;\n  let lastIndex = 11;\n  const totalPosts = useSelector(state => state.post.Posts);\n  const firstPosts = useSelector(state => state.post.Posts.slice(startIndex, lastIndex));\n  const {\n    0: posts,\n    1: setPosts\n  } = useState(null);\n  const onChange = useCallback(page => {\n    setCurrent(page);\n    startIndex = (page - 1) * 11;\n    lastIndex = startIndex + 11;\n    setPosts(totalPosts.slice(startIndex, lastIndex));\n  }, [current, startIndex, lastIndex]);\n  return __jsx(AppLayout, null, posts ? __jsx(ListComponent, {\n    Posts: posts\n  }) : __jsx(ListComponent, {\n    Posts: firstPosts\n  }), __jsx(\"div\", {\n    style: {\n      marginBottom: \"15px\"\n    }\n  }), __jsx(Global, null), __jsx(Pagination, {\n    style: {\n      textAlign: \"center\",\n      marginTop: \"20px\",\n      marginBottom: \"15px\"\n    },\n    current: current,\n    onChange: onChange,\n    total: totalPosts.length - totalPosts.length % 10\n  }));\n};\n\nexport const getServerSideProps = wrapper.getServerSideProps(async context => {\n  const cookie = context.req ? context.req.headers.cookie : '';\n  axios.defaults.headers.Cookie = '';\n\n  if (context.req && cookie) {\n    axios.defaults.headers.Cookie = cookie;\n  }\n\n  context.store.dispatch({\n    type: LOAD_POSTS_REQUEST\n  });\n  context.store.dispatch({\n    type: LOAD_MY_INFO_REQUEST\n  });\n  context.store.dispatch(END);\n  await context.store.sagaTask.toPromise();\n});\nexport default Home;","map":{"version":3,"sources":["/Users/byeongjun/My blog/front/pages/index.js"],"names":["React","useState","useCallback","AppLayout","useSelector","LOAD_MY_INFO_REQUEST","LOAD_POSTS_REQUEST","wrapper","END","axios","createGlobalStyle","Pagination","ListComponent","Global","Home","current","setCurrent","startIndex","lastIndex","totalPosts","state","post","Posts","firstPosts","slice","posts","setPosts","onChange","page","marginBottom","textAlign","marginTop","length","getServerSideProps","context","cookie","req","headers","defaults","Cookie","store","dispatch","type","sagaTask","toPromise"],"mappings":";AAAA,OAAOA,KAAP,IAAcC,QAAd,EAAuBC,WAAvB,QAAyC,OAAzC;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,SAASC,WAAT,QAA2B,aAA3B;AACA,SAASC,oBAAT,QAAqC,kBAArC;AACA,SAASC,kBAAT,QAAmC,kBAAnC;AACA,OAAOC,OAAP,MAAoB,yBAApB;AACA,SAASC,GAAT,QAAoB,YAApB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,iBAAT,QAAkC,mBAAlC;AACA,SAASC,UAAT,QAA2B,MAA3B;AACA,OAAOC,aAAP,MAA0B,6BAA1B;AAEA,OAAO,MAAMC,MAAM,GAAGH,iBAAH,4CAAZ;;AAMP,MAAMI,IAAI,GAAG,MAAM;AAEjB,QAAM;AAAA,OAACC,OAAD;AAAA,OAASC;AAAT,MAAuBf,QAAQ,CAAC,CAAD,CAArC;AACA,MAAIgB,UAAU,GAAG,CAAjB;AACA,MAAIC,SAAS,GAAG,EAAhB;AACA,QAAMC,UAAU,GAAGf,WAAW,CAAEgB,KAAD,IAAUA,KAAK,CAACC,IAAN,CAAWC,KAAtB,CAA9B;AACA,QAAMC,UAAU,GAAGnB,WAAW,CAAEgB,KAAD,IAAYA,KAAK,CAACC,IAAN,CAAWC,KAAX,CAAiBE,KAAjB,CAAuBP,UAAvB,EAAkCC,SAAlC,CAAb,CAA9B;AACA,QAAM;AAAA,OAACO,KAAD;AAAA,OAAOC;AAAP,MAAmBzB,QAAQ,CAAC,IAAD,CAAjC;AAEA,QAAM0B,QAAQ,GAAGzB,WAAW,CAAE0B,IAAD,IAAU;AACrCZ,IAAAA,UAAU,CAACY,IAAD,CAAV;AACAX,IAAAA,UAAU,GAAI,CAACW,IAAI,GAAC,CAAN,IAAS,EAAvB;AACAV,IAAAA,SAAS,GAAID,UAAU,GAAG,EAA1B;AACAS,IAAAA,QAAQ,CAACP,UAAU,CAACK,KAAX,CAAiBP,UAAjB,EAA4BC,SAA5B,CAAD,CAAR;AACH,GAL6B,EAK5B,CAACH,OAAD,EAASE,UAAT,EAAoBC,SAApB,CAL4B,CAA5B;AAOA,SACE,MAAC,SAAD,QACGO,KAAK,GACJ,MAAC,aAAD;AAAe,IAAA,KAAK,EAAIA;AAAxB,IADI,GAEJ,MAAC,aAAD;AAAe,IAAA,KAAK,EAAIF;AAAxB,IAHJ,EAKE;AAAK,IAAA,KAAK,EAAI;AAACM,MAAAA,YAAY,EAAG;AAAhB;AAAd,IALF,EAME,MAAC,MAAD,OANF,EAOE,MAAC,UAAD;AAAY,IAAA,KAAK,EAAI;AAACC,MAAAA,SAAS,EAAG,QAAb;AAAuBC,MAAAA,SAAS,EAAG,MAAnC;AAA2CF,MAAAA,YAAY,EAAG;AAA1D,KAArB;AAAwF,IAAA,OAAO,EAAEd,OAAjG;AAA0G,IAAA,QAAQ,EAAEY,QAApH;AAA8H,IAAA,KAAK,EAAER,UAAU,CAACa,MAAX,GAAqBb,UAAU,CAACa,MAAX,GAAoB;AAA9K,IAPF,CADF;AAWD,CA3BD;;AA6BA,OAAO,MAAMC,kBAAkB,GAAG1B,OAAO,CAAC0B,kBAAR,CAA2B,MAAOC,OAAP,IAAmB;AAC9E,QAAMC,MAAM,GAAGD,OAAO,CAACE,GAAR,GAAcF,OAAO,CAACE,GAAR,CAAYC,OAAZ,CAAoBF,MAAlC,GAA2C,EAA1D;AACA1B,EAAAA,KAAK,CAAC6B,QAAN,CAAeD,OAAf,CAAuBE,MAAvB,GAAgC,EAAhC;;AACA,MAAIL,OAAO,CAACE,GAAR,IAAeD,MAAnB,EAA2B;AACzB1B,IAAAA,KAAK,CAAC6B,QAAN,CAAeD,OAAf,CAAuBE,MAAvB,GAAgCJ,MAAhC;AACD;;AACDD,EAAAA,OAAO,CAACM,KAAR,CAAcC,QAAd,CAAuB;AACrBC,IAAAA,IAAI,EAAEpC;AADe,GAAvB;AAGA4B,EAAAA,OAAO,CAACM,KAAR,CAAcC,QAAd,CAAuB;AACrBC,IAAAA,IAAI,EAAErC;AADe,GAAvB;AAGA6B,EAAAA,OAAO,CAACM,KAAR,CAAcC,QAAd,CAAuBjC,GAAvB;AACA,QAAM0B,OAAO,CAACM,KAAR,CAAcG,QAAd,CAAuBC,SAAvB,EAAN;AACD,CAdiC,CAA3B;AAgBP,eAAe9B,IAAf","sourcesContent":["import React,{useState,useCallback} from 'react';\nimport AppLayout from \"../components/AppLayout\";\nimport { useSelector} from 'react-redux';\nimport { LOAD_MY_INFO_REQUEST } from '../reducers/user'\nimport { LOAD_POSTS_REQUEST } from '../reducers/post';\nimport wrapper from \"../store/configureStore\";\nimport { END } from 'redux-saga';\nimport axios from 'axios'\nimport { createGlobalStyle } from \"styled-components\";\nimport { Pagination } from 'antd';\nimport ListComponent from '../components/ListComponent';\n\nexport const Global = createGlobalStyle`\n    .ant-pagination-options{\n        display : none;\n    }\n`;\n\nconst Home = () => {\n  \n  const [current,setCurrent] = useState(1);\n  let startIndex = 0;\n  let lastIndex = 11;\n  const totalPosts = useSelector((state)=>(state.post.Posts));\n  const firstPosts = useSelector((state) => (state.post.Posts.slice(startIndex,lastIndex)));\n  const [posts,setPosts] = useState(null);\n\n  const onChange = useCallback((page) => {\n    setCurrent(page);\n    startIndex = ((page-1)*11);\n    lastIndex = (startIndex + 11);\n    setPosts(totalPosts.slice(startIndex,lastIndex))\n},[current,startIndex,lastIndex]);\n\n  return (\n    <AppLayout>\n      {posts \n      ? <ListComponent Posts = {posts}/>\n      : <ListComponent Posts = {firstPosts}/>\n      }\n      <div style = {{marginBottom : \"15px\"}}></div>\n      <Global />\n      <Pagination style = {{textAlign : \"center\", marginTop : \"20px\", marginBottom : \"15px\"}} current={current} onChange={onChange} total={totalPosts.length - (totalPosts.length % 10)} />\n    </AppLayout>\n  );\n}\n\nexport const getServerSideProps = wrapper.getServerSideProps(async (context) => {\n  const cookie = context.req ? context.req.headers.cookie : '';\n  axios.defaults.headers.Cookie = '';\n  if (context.req && cookie) {\n    axios.defaults.headers.Cookie = cookie;\n  }\n  context.store.dispatch({\n    type: LOAD_POSTS_REQUEST,\n  });\n  context.store.dispatch({\n    type: LOAD_MY_INFO_REQUEST,\n  })\n  context.store.dispatch(END);\n  await context.store.sagaTask.toPromise();\n});\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}