{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useEffect } from 'react';\nimport AppLayout from \"../../components/AppLayout\";\nimport Head from 'next/head';\nimport Router, { useRouter } from 'next/router';\nimport WritePostForm from '../../components/WritePostForm';\nimport { message } from 'antd';\nimport { useSelector } from 'react-redux';\n\nvar UpdatePost = function UpdatePost() {\n  var _useSelector = useSelector(function (state) {\n    return state.user;\n  }),\n      me = _useSelector.me;\n\n  var router = useRouter();\n  var id = router.query.id;\n  useEffect(function () {\n    if (me.email !== \"neostgeart@gmail.com\") {\n      message.error(\"글 수정 권한이 없습니다\");\n      Router.replace('/');\n    }\n  }, [me]);\n  return __jsx(React.Fragment, null, __jsx(Head, null, __jsx(\"title\", null, \"\\uAE00\\uC218\\uC815\\uD558\\uAE30\")), __jsx(AppLayout, null, __jsx(WritePostForm, {\n    id: id\n  })));\n};\n\nexport var __N_SSP = true;\nexport default UpdatePost;","map":{"version":3,"sources":["/Users/byeongjun/My blog/front/pages/UpdatePost/[id].js"],"names":["React","useEffect","AppLayout","Head","Router","useRouter","WritePostForm","message","useSelector","UpdatePost","state","user","me","router","id","query","email","error","replace"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,SAAP,MAAsB,4BAAtB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAQC,MAAR,IAAiBC,SAAjB,QAAkC,aAAlC;AACA,OAAOC,aAAP,MAA0B,gCAA1B;AAEA,SAAQC,OAAR,QAAsB,MAAtB;AAIA,SAASC,WAAT,QAA4B,aAA5B;;AAEA,IAAMC,UAAU,GAAE,SAAZA,UAAY,GAAM;AACpB,qBAAaD,WAAW,CAAC,UAACE,KAAD;AAAA,WAASA,KAAK,CAACC,IAAf;AAAA,GAAD,CAAxB;AAAA,MAAOC,EAAP,gBAAOA,EAAP;;AACA,MAAMC,MAAM,GAAGR,SAAS,EAAxB;AACA,MAAQS,EAAR,GAAeD,MAAM,CAACE,KAAtB,CAAQD,EAAR;AACAb,EAAAA,SAAS,CAAC,YAAI;AACV,QAAGW,EAAE,CAACI,KAAH,KAAa,sBAAhB,EACA;AACIT,MAAAA,OAAO,CAACU,KAAR,CAAc,eAAd;AACAb,MAAAA,MAAM,CAACc,OAAP,CAAe,GAAf;AACH;AACJ,GANQ,EAMP,CAACN,EAAD,CANO,CAAT;AAQA,SACI,4BACI,MAAC,IAAD,QACI,sDADJ,CADJ,EAII,MAAC,SAAD,QACI,MAAC,aAAD;AAAe,IAAA,EAAE,EAAIE;AAArB,IADJ,CAJJ,CADJ;AAUH,CAtBD;;;AAsCA,eAAeL,UAAf","sourcesContent":["import React, { useEffect } from 'react';\nimport AppLayout from \"../../components/AppLayout\";\nimport Head from 'next/head';\nimport  Router, {useRouter } from 'next/router';\nimport WritePostForm from '../../components/WritePostForm';\nimport { LOAD_MY_INFO_REQUEST } from '../../reducers/user'\nimport {message} from 'antd';\nimport wrapper from \"../../store/configureStore\";\nimport { END } from 'redux-saga';\nimport axios from 'axios'\nimport { useSelector } from 'react-redux';\n\nconst UpdatePost= () => {\n    const {me} = useSelector((state)=>state.user);\n    const router = useRouter();\n    const { id } = router.query;\n    useEffect(()=>{\n        if(me.email !== \"neostgeart@gmail.com\")\n        {\n            message.error(\"글 수정 권한이 없습니다\");\n            Router.replace('/');\n        }\n    },[me])\n\n    return (\n        <>\n            <Head>\n                <title>글수정하기</title>\n            </Head>\n            <AppLayout>\n                <WritePostForm id = {id}/>\n            </AppLayout>\n        </>\n    );\n}\n\nexport const getServerSideProps = wrapper.getServerSideProps(async (context) => {\n    //원래 브라우저에서 cookie를 알아서 넣어주는데 , SSR시에는 브라우저 개입을 못하니까 프론트서버에서 헤더에 쿠키를 넣어서 보내줘야 한다.\n    const cookie = context.req ? context.req.headers.cookie : '';\n    axios.defaults.headers.Cookie = '';\n    if (context.req && cookie) {\n      axios.defaults.headers.Cookie = cookie;\n    }\n    context.store.dispatch({\n      type: LOAD_MY_INFO_REQUEST,\n    })\n    context.store.dispatch(END);\n    await context.store.sagaTask.toPromise();\n  });\n\nexport default UpdatePost;"]},"metadata":{},"sourceType":"module"}